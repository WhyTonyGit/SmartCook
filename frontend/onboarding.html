<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å - SmartCook</title>
    <link rel="icon" href="/assets/brand/favicon.svg" type="image/svg+xml">

    <link rel="stylesheet" href="css/common.css">
    <style>
        .onboarding {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .onboarding-slide {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: var(--spacing-3xl) var(--spacing-xl);
            text-align: center;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .onboarding-slide.active {
            opacity: 1;
            transform: translateX(0);
            position: relative;
        }

        .onboarding-icon {
            font-size: 4rem;
            margin-bottom: var(--spacing-lg);
        }

        .onboarding-title {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            margin-bottom: var(--spacing-md);
        }

        .onboarding-description {
            font-size: var(--font-size-lg);
            opacity: 0.9;
            max-width: 300px;
            line-height: 1.6;
        }

        .onboarding-nav {
            position: absolute;
            bottom: var(--spacing-xl);
            left: var(--spacing-xl);
            right: var(--spacing-xl);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .onboarding-dots {
            display: flex;
            gap: var(--spacing-sm);
        }

        .onboarding-dot {
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.4);
            transition: all var(--transition-base);
        }

        .onboarding-dot.active {
            background: white;
            width: 24px;
        }

        .onboarding-arrow {
            width: 46px;
            height: 46px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-base);
            font-size: var(--font-size-xl);
        }

        .onboarding-arrow:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .onboarding-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .onboarding-skip {
            position: absolute;
            top: var(--spacing-md);
            left: var(--spacing-md);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: var(--font-size-sm);
            z-index: 10;
        }

        .onboarding-skip:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <div class="app-shell">
        <main class="app-main app-main--full">
            <div class="onboarding">
                <button class="onboarding-skip" onclick="skipOnboarding()">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>

                <!-- –°–ª–∞–π–¥ 1 -->
                <div class="onboarding-slide active">
                    <div class="onboarding-icon">üë§</div>
                    <h1 class="onboarding-title">–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ</h1>
                    <p class="onboarding-description">–ù–∞—Å—Ç—Ä–æ–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–¥ —Å–µ–±—è. –£–∫–∞–∂–∏ —Å–≤–æ–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –∞–ª–ª–µ—Ä–≥–∏–∏</p>
                </div>

                <!-- –°–ª–∞–π–¥ 2 -->
                <div class="onboarding-slide">
                    <div class="onboarding-icon">ü•ò</div>
                    <h1 class="onboarding-title">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã</h1>
                    <p class="onboarding-description">–ü–æ–∫–æ–ø–∞–π—Ç–µ—Å—å –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ö–æ—Ç–∏—Ç–µ —Å–µ–≥–æ–¥–Ω—è –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –±–ª—é–¥–æ</p>
                </div>

                <!-- –°–ª–∞–π–¥ 3 -->
                <div class="onboarding-slide">
                    <div class="onboarding-icon">üîç</div>
                    <h1 class="onboarding-title">–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã</h1>
                    <p class="onboarding-description">–ú—ã –Ω–∞—à–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –≤–∞–º! –ò–∑—É—á–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –≤—ã–±–µ—Ä–∏—Ç–µ –ª—É—á—à–∏–π –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –≤–∫—É—Å–æ–º</p>
                </div>

                <!-- –°–ª–∞–π–¥ 4 -->
                <div class="onboarding-slide">
                    <div class="onboarding-icon">‚≠ê</div>
                    <h1 class="onboarding-title">–ò–∑—É—á–∞–π—Ç–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏ –ª—é–±–∏–º—ã–µ –≤—Å–µ–º–∏ —Ä–µ—Ü–µ–ø—Ç—ã</h1>
                    <p class="onboarding-description">–ú—ã —Å–æ–±—Ä–∞–ª–∏ –ª—É—á—à–∏–µ –±–ª—é–¥–∞ –∏ —Å–ø–æ—Å–æ–±—ã –∏—Ö –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –≤–∞—Å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–æ–¥–±–æ—Ä–∫–µ. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!</p>
                </div>

                <div class="onboarding-nav">
                    <button class="onboarding-arrow" id="prev-btn" onclick="prevSlide()" disabled>‚Äπ</button>
                    <div class="onboarding-dots" id="dots"></div>
                    <button class="onboarding-arrow" id="next-btn" onclick="nextSlide()">‚Ä∫</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.onboarding-slide');
        const totalSlides = slides.length;

        function initDots() {
            const dotsContainer = document.getElementById('dots');
            dotsContainer.innerHTML = '';
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = `onboarding-dot ${i === 0 ? 'active' : ''}`;
                dot.onclick = () => goToSlide(i);
                dotsContainer.appendChild(dot);
            }
        }

        function updateSlides() {
            slides.forEach((slide, index) => {
                slide.classList.toggle('active', index === currentSlide);
            });

            const dots = document.querySelectorAll('.onboarding-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });

            document.getElementById('prev-btn').disabled = currentSlide === 0;
            document.getElementById('next-btn').disabled = currentSlide === totalSlides - 1;
        }

        function goToSlide(index) {
            currentSlide = index;
            updateSlides();
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                updateSlides();
            } else {
                completeOnboarding();
            }
        }

        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                updateSlides();
            }
        }

        function skipOnboarding() {
            completeOnboarding();
        }

        function completeOnboarding() {
            localStorage.setItem('onboarding_done', 'true');
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            const token = localStorage.getItem('access_token');
            if (token) {
                window.location.href = 'index.html';
            } else {
                window.location.href = 'register.html';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤–∞–π–ø–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) {
                nextSlide();
            }
            if (touchEndX > touchStartX + 50) {
                prevSlide();
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        initDots();
        updateSlides();

        // –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Å–ª–∞–π–¥–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ì–æ—Ç–æ–≤–æ"
        const lastSlide = slides[totalSlides - 1];
        const lastNextBtn = document.getElementById('next-btn');
        lastNextBtn.addEventListener('click', () => {
            if (currentSlide === totalSlides - 1) {
                completeOnboarding();
            }
        });
    </script>
    <script type="module" src="js/layout.js"></script>
</body>
</html>
