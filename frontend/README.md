# SmartCook Frontend

Frontend приложение для SmartCook - веб-приложение для поиска рецептов на основе имеющихся ингредиентов.

## Технологии

- **HTML5** - разметка
- **CSS3** - стилизация (mobile-first, адаптивный дизайн)
- **Vanilla JavaScript (ES6+)** - логика приложения
- **Fetch API** - работа с REST API

## Структура проекта

```
frontend/
├── css/
│   └── common.css          # Общие стили и design tokens
├── js/
│   ├── api.js              # API клиент для работы с backend
│   ├── utils.js            # Утилиты (форматирование, debounce и т.д.)
│   ├── auth.js             # Авторизация и защита страниц
│   └── components.js       # Компоненты для рендеринга UI
├── onboarding.html         # Онбординг (первые 4 слайда)
├── login.html              # Страница входа
├── register.html            # Страница регистрации
├── preferences.html         # Выбор исключенных ингредиентов
├── index.html              # Главная страница (рекомендации)
├── find-recipe.html        # Поиск рецептов по ингредиентам
├── categories.html          # Каталог категорий
├── recipe.html              # Детальная страница рецепта
├── favourites.html          # Избранные рецепты
├── history.html             # История просмотров
├── profile.html             # Профиль пользователя
├── edit-profile.html        # Редактирование профиля
├── my-marks.html            # Мои оценки
└── my-comments.html         # Мои отзывы
```

## Запуск

### Локальная разработка

1. Убедитесь, что backend запущен на `http://localhost:5001`

2. Запустите локальный сервер:

```bash
# Python 3
python -m http.server 8080

# Или Node.js (если установлен)
npx http-server -p 8080

# Или PHP
php -S localhost:8080
```

3. Откройте в браузере: `http://localhost:8080`

### Проверка onboarding

При первом запуске откроется страница onboarding. После прохождения она сохраняется в `localStorage` и больше не показывается.

Чтобы сбросить onboarding:
```javascript
localStorage.removeItem('onboarding_done');
```

## Основные функции

### Авторизация
- Регистрация нового пользователя
- Вход по email/телефону и паролю
- Сохранение токена в `localStorage`
- Защита страниц (редирект на login если не авторизован)

### Поиск рецептов
- Поиск по названию
- Подбор по ингредиентам (выбор из популярных или поиск)
- Разделение на "Готово сейчас" (все ингредиенты есть) и "Немного докупить"
- Учет исключенных ингредиентов пользователя

### Рецепты
- Просмотр детальной информации о рецепте
- Галерея изображений
- Список ингредиентов
- Пошаговые инструкции
- Комментарии и оценки
- Добавление в избранное
- Автоматическое добавление в историю просмотров

### Профиль
- Просмотр и редактирование профиля
- Управление исключенными ингредиентами
- Просмотр своих оценок и отзывов
- Статистика (количество отзывов и оценок)

### Категории
- Просмотр всех категорий рецептов
- Фильтрация рецептов по категориям
- Сортировка по популярности/рейтингу/времени

## Design Tokens

Все цвета, отступы и размеры определены в CSS переменных (`:root`):

- **Цвета**: `--color-primary` (#8B5CF6), `--color-secondary`, `--color-success`, `--color-error` и т.д.
- **Отступы**: `--spacing-xs` до `--spacing-2xl`
- **Радиусы**: `--radius-sm` до `--radius-full`
- **Тени**: `--shadow-sm`, `--shadow-md`, `--shadow-lg`

## Адаптивность

- **Mobile-first**: базовый дизайн для мобильных устройств
- **Tablet** (≥768px): 2 колонки в сетках
- **Desktop** (≥1024px): 3 колонки, контейнер max-width 1100px, скрыта bottom navigation

## API Integration

Все запросы к API выполняются через модуль `js/api.js`:

```javascript
import { api } from './js/api.js';

// Примеры использования
await api.login(email, password);
await api.searchRecipes({ ingredients: 'курица, картофель' });
await api.getRecipe(recipeId);
await api.addFavorite(recipeId);
```

## Компоненты

### renderRecipeCard(recipe, options)
Рендерит карточку рецепта с изображением, метаданными и кнопкой избранного.

### renderIngredientItem(ingredient, options)
Рендерит элемент ингредиента с возможностью добавления/удаления.

### renderComment(comment, options)
Рендерит комментарий с информацией об авторе и возможностью удаления.

### renderBottomNav(currentPage)
Рендерит нижнюю навигацию (только на мобильных устройствах).

## Утилиты

- `formatTime(minutes)` - форматирование времени
- `formatRating(rating)` - форматирование рейтинга
- `formatReviews(count)` - форматирование количества отзывов
- `debounce(func, wait)` - debounce функция
- `showToast(message, type)` - показ toast уведомлений
- `showLoading(container)` - показ состояния загрузки
- `showEmptyState(container, message)` - показ пустого состояния

## Проверка работы

### Основные сценарии:

1. **Регистрация и onboarding**
   - Откройте `register.html`
   - Заполните форму регистрации
   - После регистрации откроется `preferences.html` для выбора исключенных ингредиентов

2. **Поиск рецептов**
   - Откройте `find-recipe.html`
   - Выберите ингредиенты из популярных или найдите через поиск
   - Нажмите "Готово" - появятся рецепты разделенные на "Готово сейчас" и "Немного докупить"

3. **Просмотр рецепта**
   - Откройте любой рецепт
   - Просмотрите ингредиенты и шаги приготовления
   - Оставьте комментарий и оценку (если авторизованы)
   - Добавьте в избранное

4. **Профиль**
   - Откройте `profile.html`
   - Просмотрите статистику и исключенные ингредиенты
   - Перейдите в "Мои оценки" или "Мои отзывы"

## Известные ограничения

- Социальный вход (Google/Yandex/VK) пока не реализован (кнопки есть, но функционал отсутствует)
- Загрузка аватара через файл пока не сохраняется на сервер (только локальный preview)
- Некоторые API эндпоинты могут отличаться от реализованных - проверьте backend routes

## Troubleshooting

### CORS ошибки
Убедитесь, что backend настроен на CORS для `http://localhost:8080`:
```python
CORS_ORIGINS = "http://localhost:8080,http://127.0.0.1:8080"
```

### Токен не сохраняется
Проверьте, что `localStorage` доступен в браузере (не в режиме инкогнито с ограничениями).

### Страницы не загружаются
- Проверьте, что backend запущен на порту 5001
- Проверьте консоль браузера на ошибки
- Убедитесь, что используете `type="module"` для script тегов с импортами

## Дальнейшее развитие

- [ ] Реализация OAuth (Google/Yandex/VK)
- [ ] Загрузка изображений на сервер
- [ ] Кеширование данных (ingredients, categories)
- [ ] Offline режим (Service Workers)
- [ ] PWA поддержка
- [ ] Улучшение производительности (lazy loading изображений)
